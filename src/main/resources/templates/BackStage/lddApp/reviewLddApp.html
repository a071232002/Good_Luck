<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <link rel="stylesheet" th:href="@{/css/public/tableModel/try.css}" />
    <link rel="stylesheet" th:href="@{/css/public/tableModel/try2.css}" />
    <link rel="stylesheet" th:href="@{/css/public/elementModel/elementStyles.css}" />
	<link th:href="@{/css/BackStage/indexCSS/styles.css}" rel="stylesheet" />
	
	<link th:href="@{/css/BackStage/indexCSS/index.css}" rel="stylesheet" />
    <title>審核房東</title>
    <style>
        h1 {
           text-align: center;
           color: red;
        }
        
        input {
			vertical-align: middle;
		}
		
		.tittleBoard {
			text-align: center;
			width: 70%;
			padding: 0px 50px;
			border-radius: 8px;
			margin: 15px auto;
		}
		
		.tittleBoard span {
			font-size: 30px;
			font-weight: bold;
			color: #1a2a35;
			background-color: Wheat;
			padding: 10px;
			border-radius: 8px;
			box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
			display: inline-block;
			margin: 0px;
		}
		
		
		.lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            justify-content: center;
            align-items: center;
            z-index: 999999;
        }

        .lightbox img {
            max-width: 90%;
            max-height: 90%;
        }
        
        .lddAppImage{
        	cursor: zoom-in;
        }
        
        .disabled-button {
		    color: #7f8c8d;
		    background-color: #dcdcdc; 
		    cursor: not-allowed;
		}
		
		.disabled-button:hover {
			color: #7f8c8d;
		    background-color: #dcdcdc; 
		    cursor: not-allowed;
		}
		
		.approve_button,
		.reject_button {
			margin-right: 20px;
		}
        
        main{
        	margin-top: 100px;
        	padding: 50px 20px;
        }
              
    </style>
    
   </head>
   <body>
	<div th:replace="BackStage/HTMLTool/nav :: nav"></div>
	
		
    	<main>
	       
	       <div class="tittleBoard"><span class="tittleBoard">審核房東</span></div>
	       
	       <div class="lightbox" id="lightbox">
	    		<img src="" alt="放大顯示的圖片" id="lightbox-img">
		   </div>
	       
	       <table id="example" class="display" style="width: 100%">
	           <thead>
	               <tr>
	                   <th>NO.</th>
	                   <th>會員名稱</th>
	                   <th>會員電話</th>
	                   <th>申請日期</th>
	                   <th>身分證圖片</th>
	                   <th>付款狀態</th>
	                   <th>審核員工</th>
	                   <th>進度</th>
	                   <th>修改編輯</th>
	               </tr>
	           </thead>
	           <tbody>
	           <th:block th:each="lddApp : ${lddAppListData}">
	               <tr>
	                   <td th:text="${lddApp.lddAppNo}"></td>
	                   <td th:text="${lddApp.mem.memNo + '_' + lddApp.mem.memName}"></td>

	                   <td th:text="${lddApp.mem.memPhone}"></td>
	                   <td th:text="${lddApp.lddAppCreate}"></td>
	                   <td>
							<img class="lddAppImage" th:src="@{/lddApp/picture} + '?lddAppNo=' + ${lddApp.lddAppNo}" width="150px">
		        	   </td>
	                   <td th:switch="${lddApp.lddAppPayStatus}">
			                <span th:case="0" class="cancel" th:text="未付款"></span>
		                    <span th:case="1" class="success" th:text="付款完成"></span>
		                    <span th:case="2" class="warning" th:text="無用狀態待修正"></span> 
	                   </td>               				
	                   <td th:text="${lddApp.emp?.empNo}"></td>
	                   <td th:switch="${lddApp.lddAppStatus}">
		                   	<span th:case="0" class="warning" th:text="待審核"></span>
		                   	<span th:case="1" class="cancel" th:text="未通過"></span>
		                   	<span th:case="2" class="success" th:text="通過"></span>
	                   </td>
	                   <td>
							<form th:if="${lddApp.lddAppPayStatus == 1}" method="post" th:action="@{approve}">
                                <input type="hidden" name="lddAppNo" th:value="${lddApp.lddAppNo}">
                                <input type="submit" value="審核通過" class="approve_button" 
                                	th:disabled="${lddApp.lddAppStatus != 0}" 
			               			th:classappend="${lddApp.lddAppStatus != 0} ? 'disabled-button' : ''" >
                            </form>

							<form method="post" th:action="@{reject}">
                                <input type="hidden" name="lddAppNo" th:value="${lddApp.lddAppNo}">
                                <input type="submit" value="不通過" class="reject_button"
                                	th:disabled="${lddApp.lddAppStatus != 0}" 
			               			th:classappend="${lddApp.lddAppStatus != 0} ? 'disabled-button' : ''" >
                            </form>
	                   </td>
	               </tr>
	           
	           </th:block>
	   
	           </tbody>
	
	       </table>
	       
       </main>
       	
       	 <script th:src="@{/jquery/jquery-3.7.1.min.js}"></script>
         <script th:src="@{/js/public/tableModel/the.js}"></script>
         <script th:src="@{/js/public/tableModel/the2.js}"></script>
 		
         <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
         <script th:src="@{/js/BackStage/indexJS/scripts.js}"></script>
		
<!-- 		<script th:src="@{/js/BackStage/indexJS/indexActiveColor.js}"></script> -->
	
<!-- 		<script th:src="@{/js/BackStage/indexJS/navImgEvent.js}"></script> -->
<!-- 		<!-- 取消<a>預設行為 --> -->
<!-- 		<script th:src="@{/js/BackStage/indexJS/LinkCancelEvent.js}"></script> -->
         
         
         
         <script>
           let table = new DataTable("#example");
           console.log($(".test"));
         </script>
         <script>
	         var images = document.querySelectorAll(".lddAppImage");
	         var lightbox = document.getElementById("lightbox");
	         var lightboxImg = document.getElementById("lightbox-img");
	         
	         images.forEach(function (img) {
	             
	             img.onclick = function () {
	                 lightbox.style.display = 'flex'; 
	                 lightboxImg.src = this.src; 
	             };
	         });
	        
	         lightbox.onclick = function () {
	             lightbox.style.display = 'none'; 
	         };
         </script>
         
    
   </body>
   </html>